{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["const KEY = 'feedback-form-state';\nconst formEl = document.querySelector('.feedback-form');\nlet formData = {\n  email: '',\n  message: '',\n};\n\nfillForm();\n\nformEl.addEventListener('input', onChange);\nformEl.addEventListener('submit', onSubmit);\n\nfunction onChange(e) {\n  const { target: fieldEl } = e;\n\n  const fieldName = fieldEl.name;\n  const fieldValue = fieldEl.value.trim();\n\n  formData[fieldName] = fieldValue;\n\n  localStorage.setItem(KEY, JSON.stringify(formData));\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  if (isEmptyFields()) {\n    return alert('Please fill in all fields.');\n  }\n  console.log('formData: ', { ...formData });\n  clearLS();\n  formEl.reset();\n}\n\nfunction fillForm() {\n  let dataFromLS = null;\n  try {\n    dataFromLS = localStorage.getItem(KEY);\n    if (dataFromLS === null) {\n      return;\n    }\n\n    formData = JSON.parse(dataFromLS);\n\n    for (const key in formData) {\n      formEl.elements[key].value = formData[key];\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction clearLS() {\n  formData.email = '';\n  formData.message = '';\n  localStorage.setItem(KEY, JSON.stringify(formData));\n  localStorage.removeItem(KEY);\n}\n\nfunction isEmptyFields() {\n  const keys = Object.keys(formData);\n  const formElsList = Array.from(formEl.elements);\n  return formElsList.some(el => keys.includes(el.name) && !el.value);\n}"],"names":["KEY","formEl","formData","fillForm","onChange","onSubmit","e","fieldEl","fieldName","fieldValue","isEmptyFields","clearLS","dataFromLS","key","error","keys","el"],"mappings":"wFAAA,MAAMA,EAAM,sBACNC,EAAS,SAAS,cAAc,gBAAgB,EACtD,IAAIC,EAAW,CACb,MAAO,GACP,QAAS,EACX,EAEAC,IAEAF,EAAO,iBAAiB,QAASG,CAAQ,EACzCH,EAAO,iBAAiB,SAAUI,CAAQ,EAE1C,SAASD,EAASE,EAAG,CACnB,KAAM,CAAE,OAAQC,CAAS,EAAGD,EAEtBE,EAAYD,EAAQ,KACpBE,EAAaF,EAAQ,MAAM,KAAI,EAErCL,EAASM,CAAS,EAAIC,EAEtB,aAAa,QAAQT,EAAK,KAAK,UAAUE,CAAQ,CAAC,CACpD,CAEA,SAASG,EAASC,EAAG,CAEnB,GADAA,EAAE,eAAc,EACZI,EAAa,EACf,OAAO,MAAM,4BAA4B,EAE3C,QAAQ,IAAI,aAAc,CAAE,GAAGR,CAAU,CAAA,EACzCS,IACAV,EAAO,MAAK,CACd,CAEA,SAASE,GAAW,CAClB,IAAIS,EAAa,KACjB,GAAI,CAEF,GADAA,EAAa,aAAa,QAAQZ,CAAG,EACjCY,IAAe,KACjB,OAGFV,EAAW,KAAK,MAAMU,CAAU,EAEhC,UAAWC,KAAOX,EAChBD,EAAO,SAASY,CAAG,EAAE,MAAQX,EAASW,CAAG,CAE5C,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,SAASH,GAAU,CACjBT,EAAS,MAAQ,GACjBA,EAAS,QAAU,GACnB,aAAa,QAAQF,EAAK,KAAK,UAAUE,CAAQ,CAAC,EAClD,aAAa,WAAWF,CAAG,CAC7B,CAEA,SAASU,GAAgB,CACvB,MAAMK,EAAO,OAAO,KAAKb,CAAQ,EAEjC,OADoB,MAAM,KAAKD,EAAO,QAAQ,EAC3B,KAAKe,GAAMD,EAAK,SAASC,EAAG,IAAI,GAAK,CAACA,EAAG,KAAK,CACnE"}